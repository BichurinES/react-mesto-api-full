{"ast":null,"code":"class Api {\n  constructor({\n    _id,\n    baseUrl,\n    headers\n  }) {\n    this._id = _id;\n    this._baseUrl = baseUrl;\n    this._profileUrl = baseUrl + '/users/me';\n    this._cardsUrl = baseUrl + '/cards';\n    this._headers = {\n      authorization: this._id,\n      'Content-Type': 'application/json'\n    };\n  }\n\n  _createRequest({\n    url,\n    headersObj,\n    method,\n    body\n  }) {\n    return fetch(url, {\n      method: method,\n      headers: headersObj,\n      body: body\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  getProfile() {\n    return this._createRequest({\n      url: this._profileUrl,\n      headersObj: this._headers,\n      method: 'GET'\n    });\n  }\n\n  getInitialCards() {\n    return this._createRequest({\n      url: this._cardsUrl,\n      headersObj: this._headers,\n      method: 'GET'\n    });\n  }\n\n  chahgeProfile(newData) {\n    return this._createRequest({\n      url: this._profileUrl,\n      headersObj: this._headers,\n      method: 'PATCH',\n      body: JSON.stringify(newData)\n    });\n  }\n\n  changeAvatar(avatar) {\n    return this._createRequest({\n      url: `${this._profileUrl}/avatar`,\n      headersObj: this._headers,\n      method: 'PATCH',\n      body: JSON.stringify(avatar)\n    });\n  }\n\n  addNewCard(cardData) {\n    return this._createRequest({\n      url: this._cardsUrl,\n      headersObj: this._headers,\n      method: 'POST',\n      body: JSON.stringify(cardData)\n    });\n  }\n\n  deleteCard(idCard) {\n    return this._createRequest({\n      url: `${this._cardsUrl}/${idCard}`,\n      headersObj: this._headers,\n      method: 'DELETE'\n    });\n  }\n\n  changeLikeCardStatus(idCard, like) {\n    return this._createRequest({\n      url: `${this._cardsUrl}/likes/${idCard}`,\n      headersObj: this._headers,\n      method: like ? 'PUT' : 'DELETE'\n    });\n  }\n\n}\n\nfunction createApi(_id) {\n  const apiOptions = {\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-20',\n    headers: {\n      authorization: _id,\n      'Content-Type': 'application/json'\n    }\n  };\n  const api = new Api(apiOptions);\n  return api;\n}\n\nconst apiOptions = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-20',\n  headers: {\n    authorization: '73878bf0-187e-4ea2-beea-67c91647b84f',\n    'Content-Type': 'application/json'\n  }\n};\nconst api = new Api(apiOptions);\nexport default api;","map":{"version":3,"sources":["/Users/egor_bichurin/Library/Mobile Documents/com~apple~CloudDocs/Яндекс.Практикум/mesto-react-auth/src/utils/api.js"],"names":["Api","constructor","_id","baseUrl","headers","_baseUrl","_profileUrl","_cardsUrl","_headers","authorization","_createRequest","url","headersObj","method","body","fetch","then","res","ok","json","Promise","reject","status","getProfile","getInitialCards","chahgeProfile","newData","JSON","stringify","changeAvatar","avatar","addNewCard","cardData","deleteCard","idCard","changeLikeCardStatus","like","createApi","apiOptions","api"],"mappings":"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","sourcesContent":["class Api {\n  constructor({_id, baseUrl, headers}) {\n    this._id = _id;\n    this._baseUrl = baseUrl;\n    this._profileUrl = baseUrl + '/users/me';\n    this._cardsUrl = baseUrl + '/cards';\n    this._headers = {\n      authorization: this._id,\n      'Content-Type': 'application/json'\n    };\n  }\n\n  _createRequest({url, headersObj, method, body}) {\n    return fetch(url, {method: method, headers: headersObj, body: body})\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n\n        return Promise.reject(`Ошибка: ${res.status}`);\n      })\n  }\n\n  getProfile() {\n    return this._createRequest({\n      url: this._profileUrl,\n      headersObj: this._headers,\n      method: 'GET'})\n  }\n\n  getInitialCards() {\n    return this._createRequest({\n      url: this._cardsUrl,\n      headersObj: this._headers,\n      method: 'GET'})\n  }\n\n  chahgeProfile(newData) {\n    return this._createRequest({\n      url: this._profileUrl,\n      headersObj: this._headers,\n      method: 'PATCH',\n      body: JSON.stringify(newData)\n    })\n  }\n\n  changeAvatar(avatar) {\n    return this._createRequest({\n      url: `${this._profileUrl}/avatar`,\n      headersObj: this._headers,\n      method: 'PATCH',\n      body: JSON.stringify(avatar)\n    })\n  }\n\n  addNewCard(cardData) {\n    return this._createRequest({\n      url: this._cardsUrl,\n      headersObj: this._headers,\n      method: 'POST',\n      body: JSON.stringify(cardData)\n    })\n  }\n\n  deleteCard(idCard) {\n    return this._createRequest({\n      url: `${this._cardsUrl}/${idCard}`,\n      headersObj: this._headers,\n      method: 'DELETE'\n    })\n  }\n\n  changeLikeCardStatus(idCard, like) {\n    return this._createRequest({\n      url: `${this._cardsUrl}/likes/${idCard}`,\n      headersObj: this._headers,\n      method: like ? 'PUT' : 'DELETE'\n    })\n  }\n}\n\nfunction createApi(_id) {\n  const apiOptions = {\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-20',\n    headers: {\n      authorization: _id,\n      'Content-Type': 'application/json'\n    }\n  };\n\n  const api = new Api(apiOptions);\n  return api;\n}\n\nconst apiOptions = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-20',\n  headers: {\n    authorization: '73878bf0-187e-4ea2-beea-67c91647b84f',\n    'Content-Type': 'application/json'\n  }\n};\n\nconst api = new Api(apiOptions);\nexport default api;"]},"metadata":{},"sourceType":"module"}