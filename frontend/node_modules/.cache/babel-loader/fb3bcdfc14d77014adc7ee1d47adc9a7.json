{"ast":null,"code":"import{useHistory}from'react-router-dom';import EntryForm from'./EntryForm';import*as auth from'./Auth';import{jsx as _jsx}from\"react/jsx-runtime\";function Login(props){var history=useHistory();function handleSubmit(_ref){var email=_ref.email,password=_ref.password;auth.login({email:email,password:password}).then(function(res){if(res.error){props.handleUpdateInfoTooltip({title:res.error,isSuccess:false});props.handleInfoTooltipShow();}else{localStorage.setItem('token',res.token);auth.checkToken(res.token).then(function(res){if(res.data){props.handleUpdateEmail(res.data.email);props.handleLogged();history.push('/');}else{props.handleUpdateInfoTooltip({title:'Что-то пошло не так! Попробуйте ещё раз.',isSuccess:false});props.handleInfoTooltipShow();}});}}).catch(function(){props.handleUpdateInfoTooltip({title:'Что-то пошло не так! Попробуйте ещё раз.',isSuccess:false});props.handleInfoTooltipShow();});}return/*#__PURE__*/_jsx(EntryForm,{name:\"login\",title:\"\\u0412\\u0445\\u043E\\u0434\",buttonText:\"\\u0412\\u043E\\u0439\\u0442\\u0438\",handleSubmit:handleSubmit});}export default Login;","map":{"version":3,"sources":["/Users/egorbicurin/Library/Mobile Documents/com~apple~CloudDocs/Яндекс.Практикум/mesto-react-auth/src/components/Login.js"],"names":["useHistory","EntryForm","auth","Login","props","history","handleSubmit","email","password","login","then","res","error","handleUpdateInfoTooltip","title","isSuccess","handleInfoTooltipShow","localStorage","setItem","token","checkToken","data","handleUpdateEmail","handleLogged","push","catch"],"mappings":"AAAA,OAASA,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAO,GAAKC,CAAAA,IAAZ,KAAsB,QAAtB,C,2CAEA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,CACpB,GAAMC,CAAAA,OAAO,CAAGL,UAAU,EAA1B,CAEA,QAASM,CAAAA,YAAT,MAAyC,IAAlBC,CAAAA,KAAkB,MAAlBA,KAAkB,CAAXC,QAAW,MAAXA,QAAW,CACvCN,IAAI,CAACO,KAAL,CAAW,CAACF,KAAK,CAALA,KAAD,CAAQC,QAAQ,CAARA,QAAR,CAAX,EACGE,IADH,CACQ,SAACC,GAAD,CAAS,CACb,GAAIA,GAAG,CAACC,KAAR,CAAe,CACbR,KAAK,CAACS,uBAAN,CAA8B,CAACC,KAAK,CAAEH,GAAG,CAACC,KAAZ,CAAmBG,SAAS,CAAE,KAA9B,CAA9B,EACAX,KAAK,CAACY,qBAAN,GACD,CAHD,IAGO,CACLC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BP,GAAG,CAACQ,KAAlC,EACAjB,IAAI,CAACkB,UAAL,CAAgBT,GAAG,CAACQ,KAApB,EACGT,IADH,CACQ,SAACC,GAAD,CAAS,CACb,GAAIA,GAAG,CAACU,IAAR,CAAc,CACZjB,KAAK,CAACkB,iBAAN,CAAwBX,GAAG,CAACU,IAAJ,CAASd,KAAjC,EACAH,KAAK,CAACmB,YAAN,GACAlB,OAAO,CAACmB,IAAR,CAAa,GAAb,EACD,CAJD,IAIO,CACLpB,KAAK,CAACS,uBAAN,CAA8B,CAACC,KAAK,CAAE,0CAAR,CAAoDC,SAAS,CAAE,KAA/D,CAA9B,EACAX,KAAK,CAACY,qBAAN,GACD,CACF,CAVH,EAWD,CACF,CAnBH,EAoBGS,KApBH,CAoBS,UAAM,CACXrB,KAAK,CAACS,uBAAN,CAA8B,CAACC,KAAK,CAAE,0CAAR,CAAoDC,SAAS,CAAE,KAA/D,CAA9B,EACAX,KAAK,CAACY,qBAAN,GACD,CAvBH,EAwBD,CAED,mBACE,KAAC,SAAD,EAAW,IAAI,CAAC,OAAhB,CAAwB,KAAK,CAAC,0BAA9B,CAAqC,UAAU,CAAC,gCAAhD,CAAwD,YAAY,CAAEV,YAAtE,EADF,CAGD,CAED,cAAeH,CAAAA,KAAf","sourcesContent":["import { useHistory } from 'react-router-dom';\nimport EntryForm from './EntryForm';\nimport * as auth from './Auth';\n\nfunction Login(props) {\n  const history = useHistory();\n\n  function handleSubmit({email, password}) {\n    auth.login({email, password})\n      .then((res) => {\n        if (res.error) {\n          props.handleUpdateInfoTooltip({title: res.error, isSuccess: false});\n          props.handleInfoTooltipShow();\n        } else {\n          localStorage.setItem('token', res.token);\n          auth.checkToken(res.token)\n            .then((res) => {\n              if (res.data) {\n                props.handleUpdateEmail(res.data.email);\n                props.handleLogged();\n                history.push('/');\n              } else {\n                props.handleUpdateInfoTooltip({title: 'Что-то пошло не так! Попробуйте ещё раз.', isSuccess: false});\n                props.handleInfoTooltipShow();\n              }\n            });\n        }\n      })\n      .catch(() => {\n        props.handleUpdateInfoTooltip({title: 'Что-то пошло не так! Попробуйте ещё раз.', isSuccess: false});\n        props.handleInfoTooltipShow();\n      })\n  }\n\n  return (\n    <EntryForm name=\"login\" title=\"Вход\" buttonText=\"Войти\" handleSubmit={handleSubmit} />\n  );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}